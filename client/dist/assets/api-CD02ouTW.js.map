{"version":3,"file":"api-CD02ouTW.js","sources":["../../../node_modules/classnames/index.js","../../src/types.ts","../../src/api.ts"],"sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","export const TIMEFRAMES = ['M1', 'M5', 'M15', 'M30', 'H1', 'H4', 'D1'] as const;\nexport type TimeframeId = (typeof TIMEFRAMES)[number];\n\nexport const TIMEFRAME_INTERVAL: Record<TimeframeId, string> = {\n  M1: '1',\n  M5: '5',\n  M15: '15',\n  M30: '30',\n  H1: '60',\n  H4: '240',\n  D1: 'D'\n};\n\nexport const TIMEFRAME_LABEL: Record<TimeframeId, string> = {\n  M1: '1 минута',\n  M5: '5 минут',\n  M15: '15 минут',\n  M30: '30 минут',\n  H1: '1 час',\n  H4: '4 часа',\n  D1: '1 день'\n};\n\nexport interface TimeframeMetrics {\r\n  timeframe: TimeframeId;\r\n  openPrice: number;\r\n  baselinePrice: number | null;\r\n  openTime: number;\r\n  changePercent: number | null;\r\n  volume: number;\r\n  turnover: number;\r\n  updatedAt: number;\r\n}\r\n\nexport interface MarketTableEntry {\n  symbol: string;\n  baseCoin: string;\n  quoteCoin: string;\n  lastPrice: number | null;\n  lastPriceUpdatedAt: number | null;\n  metrics: Partial<Record<TimeframeId, TimeframeMetrics>>;\n}\n\nexport interface TimeframeOverviewItem {\n  timeframe: TimeframeId;\n  gainers: number;\n  losers: number;\n}\n\nexport interface MarketResponse {\n  updatedAt: number;\n  entries: MarketTableEntry[];\n  overview: TimeframeOverviewItem[];\n}\n\nexport interface CandlePoint {\r\n  openTime: number;\r\n  open: number;\r\n  high: number;\r\n  low: number;\r\n  close: number;\r\n  prevClose: number | null;\r\n  volume: number;\r\n}\r\nexport const TIMEFRAME_DURATION_MS: Record<TimeframeId, number> = {\n  M1: 60 * 1000,\n  M5: 5 * 60 * 1000,\n  M15: 15 * 60 * 1000,\n  M30: 30 * 60 * 1000,\n  H1: 60 * 60 * 1000,\n  H4: 4 * 60 * 60 * 1000,\n  D1: 24 * 60 * 60 * 1000\n};","import type { MarketResponse, CandlePoint, TimeframeId } from \"./types\";\nimport { TIMEFRAME_INTERVAL } from \"./types\";\n\nconst MARKET_ENDPOINT = \"/api/market\";\n\nexport async function fetchMarketSnapshot(init?: RequestInit): Promise<MarketResponse> {\n  const response = await fetch(MARKET_ENDPOINT, init);\n  if (!response.ok) {\n    throw new Error(`API error ${response.status}`);\n  }\n  const data = (await response.json()) as MarketResponse;\n  return data;\n}\n\nexport async function fetchCandles(\n  symbol: string,\n  timeframe: TimeframeId,\n  limit = 500\n): Promise<CandlePoint[]> {\n  const interval = TIMEFRAME_INTERVAL[timeframe];\n  const params = new URLSearchParams({ timeframe, interval, limit: limit.toString() });\n  const response = await fetch(`${MARKET_ENDPOINT}/${encodeURIComponent(symbol)}/candles?${params}`);\n  if (!response.ok) {\n    throw new Error(`API error ${response.status}`);\n  }\n  const payload = (await response.json()) as { candles: CandlePoint[] };\n  return payload.candles;\n}\r\n"],"names":["hasOwn","classNames","classes","i","arg","appendClass","parseValue","key","value","newClass","module","TIMEFRAMES","TIMEFRAME_INTERVAL","TIMEFRAME_LABEL","TIMEFRAME_DURATION_MS","MARKET_ENDPOINT","fetchMarketSnapshot","init","response","fetchCandles","symbol","timeframe","limit","interval","params"],"mappings":";;;;gBAOC,UAAY,CAGZ,IAAIA,EAAS,CAAA,EAAG,eAEhB,SAASC,GAAc,CAGtB,QAFIC,EAAU,GAELC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAC1C,IAAIC,EAAM,UAAUD,CAAC,EACjBC,IACHF,EAAUG,EAAYH,EAASI,EAAWF,CAAG,CAAC,EAElD,CAEE,OAAOF,CACT,CAEC,SAASI,EAAYF,EAAK,CACzB,GAAI,OAAOA,GAAQ,UAAY,OAAOA,GAAQ,SAC7C,OAAOA,EAGR,GAAI,OAAOA,GAAQ,SAClB,MAAO,GAGR,GAAI,MAAM,QAAQA,CAAG,EACpB,OAAOH,EAAW,MAAM,KAAMG,CAAG,EAGlC,GAAIA,EAAI,WAAa,OAAO,UAAU,UAAY,CAACA,EAAI,SAAS,SAAQ,EAAG,SAAS,eAAe,EAClG,OAAOA,EAAI,SAAQ,EAGpB,IAAIF,EAAU,GAEd,QAASK,KAAOH,EACXJ,EAAO,KAAKI,EAAKG,CAAG,GAAKH,EAAIG,CAAG,IACnCL,EAAUG,EAAYH,EAASK,CAAG,GAIpC,OAAOL,CACT,CAEC,SAASG,EAAaG,EAAOC,EAAU,CACtC,OAAKA,EAIDD,EACIA,EAAQ,IAAMC,EAGfD,EAAQC,EAPPD,CAQV,CAEsCE,EAAO,SAC3CT,EAAW,QAAUA,EACrBS,EAAA,QAAiBT,GAOjB,OAAO,WAAaA,CAEtB,uCC5EaU,EAAa,CAAC,KAAM,KAAM,MAAO,MAAO,KAAM,KAAM,IAAI,EAGxDC,EAAkD,CAC7D,GAAI,IACJ,GAAI,IACJ,IAAK,KACL,IAAK,KACL,GAAI,KACJ,GAAI,MACJ,GAAI,GACN,EAEaC,EAA+C,CAC1D,GAAI,WACJ,GAAI,UACJ,IAAK,WACL,IAAK,WACL,GAAI,QACJ,GAAI,SACJ,GAAI,QACN,EA2CaC,EAAqD,CAChE,GAAI,GAAK,IACT,GAAI,EAAI,GAAK,IACb,IAAK,GAAK,GAAK,IACf,IAAK,GAAK,GAAK,IACf,GAAI,GAAK,GAAK,IACd,GAAI,EAAI,GAAK,GAAK,IAClB,GAAI,GAAK,GAAK,GAAK,GACrB,ECrEMC,EAAkB,cAExB,eAAsBC,EAAoBC,EAA6C,CACrF,MAAMC,EAAW,MAAM,MAAMH,EAAiBE,CAAI,EAClD,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,aAAaA,EAAS,MAAM,EAAE,EAGhD,OADc,MAAMA,EAAS,KAAA,CAE/B,CAEA,eAAsBC,EACpBC,EACAC,EACAC,EAAQ,IACgB,CACxB,MAAMC,EAAWX,EAAmBS,CAAS,EACvCG,EAAS,IAAI,gBAAgB,CAAE,UAAAH,EAAW,SAAAE,EAAU,MAAOD,EAAM,SAAA,EAAY,EAC7EJ,EAAW,MAAM,MAAM,GAAGH,CAAe,IAAI,mBAAmBK,CAAM,CAAC,YAAYI,CAAM,EAAE,EACjG,GAAI,CAACN,EAAS,GACZ,MAAM,IAAI,MAAM,aAAaA,EAAS,MAAM,EAAE,EAGhD,OADiB,MAAMA,EAAS,KAAA,GACjB,OACjB","x_google_ignoreList":[0]}