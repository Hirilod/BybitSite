# Bybit Market Monitor

Полноценное приложение для мониторинга всех бессрочных USDT-контрактов Bybit с пересчётом изменения цены и оборота от открытия актуального бара по таймфреймам.

## Возможности

- Сервер на Express агрегирует данные из Bybit: список инструментов, тикеры в реальном времени и свечи по таймфреймам D1, H4, H1, M30, M15, M5 и M1.
- Кеширование расчётов и выдача по `GET /api/market` + отдельный REST-ендпоинт `GET /api/market/:symbol/candles` для исторических данных под график.
- Клиент на Vite + React: таблица с автообновлением (каждые ~3 секунды), кликабельная горизонтальная шкала таймфреймов, сортировка по клику и фильтрация.
- Кнопка «График» ведёт на внутреннюю страницу с живым графиком (lightweight-charts) и переключателями таймфреймов. График догружается по REST и обновляется через WebSocket Bybit.
- Все основные надписи и числа обновляются автоматически без перезагрузки страницы.

## Требования

- Node.js 18+

## Установка зависимостей

```bash
npm install
```

## Запуск сервера (API)

```bash
npm run --workspace server dev
```

Сервер слушает `http://localhost:4000`. При старте загружает список контрактов и постепенно прогревает расчёты, периодически обновляя тикеры (≈3 c) и свечи. Дополнительно доступен `GET /health` для проверки состояния.

## Запуск клиента (UI)

```bash
npm run --workspace client dev
```

Интерфейс будет доступен на `http://localhost:5173`. Vite автоматически проксирует запросы ` /api/*` к серверу на 4000 порту.

## Сборка проекта

```bash
npm run --workspace server build
npm run --workspace client build
```

## Примечания

- Частоту опроса свечей/тикеров можно настроить в `MarketUpdater` (параметры `tickerIntervalMs` и `candleIntervalMs`).
- В клиентском графике используется прямое WebSocket-подключение к `wss://stream.bybit.com/v5/public/linear`. При необходимости можно расширить список подписок.
- Таймфреймы объединены в одну горизонтальную панель; выбранный таймфрейм управляет сортировкой таблицы и визуально подсвечивается.
